(class{static init(){console.info("%c\n  ████████╗██████╗ ███████╗███████╗ ██████╗ ██╗██╗\n  ╚══██╔══╝██╔══██╗██╔════╝██╔════╝██╔═══██╗██║██║\n     ██║   ██████╔╝█████╗  █████╗  ██║   ██║██║██║\n     ██║   ██╔══██╗██╔══╝  ██╔══╝  ██║   ██║██║██║\n     ██║   ██║  ██║███████╗██║     ╚██████╔╝██║███████╗\n     ╚═╝   ╚═╝  ╚═╝╚══════╝╚═╝      ╚═════╝ ╚═╝╚══════╝\n                  Welcome to trefoil!\n","color:#1fc7b6")}}).init(),class{static init(){function e(e,t,i){Toastify({gravity:"bottom",...i,text:t,className:`toastify-${e}`}).showToast()}Object.defineProperty(window,"trefoil",{value:{notification:{info(t,i={}){e("info",t,i)},success(t,i={}){e("success",t,i)},error(t,i={}){e("error",t,i)},warn(t,i={}){e("warn",t,i)}}},configurable:!1})}}.init(),class{static initCopy(){function e(e=!1){e?trefoil.notification.warn("由于浏览器版本/网页http问题，无法确定是否复制成功",{duration:3e3}):trefoil.notification.success("复制成功",{duration:1e3})}function t(){trefoil.notification.error("复制失败",{duration:1e3})}document.querySelectorAll("figure.highlight").forEach((i=>{i.addEventListener("click",(o=>{if(o.target!==i.querySelector("figcaption > i"))return;const n=i.querySelector(".code").innerText,r=navigator.clipboard;if(r)r.writeText(n).then((()=>{e()})).catch((e=>{console.error(e),t()}));else try{const t=document.createElement("textarea");document.body.appendChild(t),t.value=n,t.select(),document.execCommand("copy"),document.body.removeChild(t),e(!0)}catch(e){console.error(e),t()}}))}))}static initExpand(){document.querySelectorAll(".code-expand-btn i").forEach((e=>{e.addEventListener("click",(e=>{const t=e.target,i=t.parentNode;i.classList.contains("expand-done")?(i.classList.remove("expand-done"),t.classList.remove("ri-arrow-up-s-fill"),t.classList.add("ri-arrow-down-s-fill")):(i.classList.add("expand-done"),t.classList.remove("ri-arrow-down-s-fill"),t.classList.add("ri-arrow-up-s-fill"))}))}))}static initExpandHidden(){window.addEventListener("load",(()=>{document.querySelectorAll("figure.highlight").forEach((e=>{const t=e.querySelector(".code-expand-btn"),i=e.querySelector("table");i.style.setProperty("--code-height",i.scrollHeight+"px"),i.scrollHeight===i.clientHeight&&i.scrollHeight<=GLOBAL_CONFIG.code.height_limit&&(t.style.display="none")}))}))}static init(){this.initCopy(),this.initExpand(),this.initExpandHidden()}}.init(),class{static BigImageMatch(){document.querySelectorAll("article p span:has(img)").forEach((e=>{const t=e.querySelector("img");t.clientHeight>240&&t.clientWidth>240?e.classList.add("bigimg"):e.classList.remove("bigimg")}))}static init(){let e=0;new ResizeObserver((t=>{e&&clearTimeout(e),e=setTimeout((()=>{t.forEach((()=>{this.BigImageMatch()}))}),100)})).observe(document.querySelector("#post"))}}.init(),class{static init(){function e(){this.removeEventListener("error",e),this.srcset=GLOBAL_CONFIG.lazyload.onerror}const t=new IntersectionObserver((function(i){i.forEach((i=>{if(i.isIntersecting){const o=i.target;o.srcset=o.getAttribute("data-srcset"),o.addEventListener("error",e),o.classList.add("loaded"),t.unobserve(o)}}))}));document.querySelectorAll("img.lazy-load").forEach((e=>{t.observe(e)}))}}.init();